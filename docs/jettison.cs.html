<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />

		<script>
			document.title = "";
		</script>

		<style>
			body {
				font-family: sans-serif;
				color: #333;

				padding: 1em;
				padding-top: 0;

				max-width: 60em;
			}

			p, dd, li {
				text-align: justify;
				line-height: 130%;
			}

			dl {
				margin-bottom: 15px;
			}

			dt:target, .highlight {
				background-color: #fbe54e;
			}

			*:target>tt, *:target>pre, *:target>code,
			.highlight>tt, .highlight>pre, .highlight>code {
				background-color: transparent;
			}

			dd {
				margin-top: 3px;
				margin-bottom: 10px;
				margin-left: 30px;
			}

			dd p {
				margin-top: 0;
			}

			tt, pre, code {
				background-color: #ecf0f3;
				padding: 0 1px 0 1px;
				font-size: 0.95em;
			}

			tt.nobg, tt.descscopename {
				background-color: transparent;
			}

			tt.descname {
				background-color: transparent;
				font-weight: bold;
				font-size: 1.2em;
			}

			a {
				color: #355f7c;
				text-decoration: none;
			}

			a.headerlink {
				color: #c60f0f;
				font-size: 0.8em;
				padding: 0 4px 0 4px;
				visibility: hidden;
			}

			a.headerlink:hover {
				background-color: #c60f0f;
				color: white;
			}

			*:hover > a.headerlink {
				visibility: visible;
			}

			ul.subtle {
				list-style-type: none;
				margin-top: 0;
				margin-bottom: 8px;
			}

			ul.subtle>li {
				list-style-type: none;
			}

			.subtle {
				margin-bottom: 4px;
			}

			.arg_desc p {
				margin-left: 1em;
			}
		</style>
	</head>
	<body>
<dl class="class">
	<dt id="class_JSONObject">
		<tt class="nobg">abstract class</tt>
		<tt class="descname">JSONObject</tt>		<a class="headerlink" href="#class_JSONObject" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>This represents a base that all other JSON objects inherit from,
and thus these methods apply to all of them.</p>



<dl class="function">
	<dt id="JSONObject::getJSONType">
<tt class="descname">getJSONType</tt><big>(</big><big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#JSONObject::getJSONType" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Determines the type of the JSON object and returns a string such as "hash" or "array".
Custom JSON objects that do not start with "JSON" will break this.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONObject::describe">
<tt class="descname">describe</tt><big>(</big>[<em>depth</em>]<big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#JSONObject::describe" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		


			<dl>
				<dt>See also:</dt>
<dd><a href="#describeJSON"><code>describeJSON</code></a></dd>			</dl>
	</dd>
</dl>
<dl class="function">
	<dt id="JSONObject::addParent">
<tt class="descname">addParent</tt><big>(</big><em>parent</em><big>)</big>
		<a class="headerlink" href="#JSONObject::addParent" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Adds a JSON object to another's list of parents, setting it as the main parent if it's the first.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONObject::removeParent">
<tt class="descname">removeParent</tt><big>(</big><em>parent</em><big>)</big>
		<a class="headerlink" href="#JSONObject::removeParent" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Not implemented.</p>


	</dd>
</dl>
	</dd>
</dl><dl class="class">
	<dt id="class_JSONArray">
		<tt class="nobg">abstract class</tt>
		<tt class="descname">JSONArray</tt>		<a class="headerlink" href="#class_JSONArray" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>A JSON list object, such as <code>["hello", 3.14]</code>.</p>
<p>Items are stored as <code>array.item[i]</code>, where <code>0 &lt;= i &lt; array.length</code>.</p>
<p>Iteration example:</p>
<pre><code>for (%i = 0; %i &lt; %array.length; %i++)
{
  echo(%array.item[%i]);
}
</code></pre>



<dl class="function">
	<dt id="JSONArray::getLength">
<tt class="descname">getLength</tt><big>(</big><big>)</big>
<tt class="nobg">&#x21d2; number</tt>		<a class="headerlink" href="#JSONArray::getLength" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns the number of items in the array.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONArray::describe">
<tt class="descname">describe</tt><big>(</big>[<em>depth</em>]<big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#JSONArray::describe" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		


			<dl>
				<dt>See also:</dt>
<dd><a href="#describeJSON"><code>describeJSON</code></a></dd>			</dl>
	</dd>
</dl>
<dl class="function">
	<dt id="JSONArray::get">
<tt class="descname">get</tt><big>(</big><em>index</em>[, <em>default</em>]<big>)</big>
<tt class="nobg">&#x21d2; anything</tt>		<a class="headerlink" href="#JSONArray::get" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns the item at <em>index</em>, or <em>default</em> ("" if unspecified) if it is out of range.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONArray::append">
<tt class="descname">append</tt><big>(</big><em>item</em><big>)</big>
<tt class="nobg">&#x21d2; JSONArray</tt>		<a class="headerlink" href="#JSONArray::append" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Appends <em>item</em> to the end of the array, incrementing the length.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONArray::prepend">
<tt class="descname">prepend</tt><big>(</big><em>item</em><big>)</big>
<tt class="nobg">&#x21d2; JSONArray</tt>		<a class="headerlink" href="#JSONArray::prepend" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Prepends <em>item</em> to the beginning of the array, incrementing the length and shifting all items up by one.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONArray::contains">
<tt class="descname">contains</tt><big>(</big><em>item</em><big>)</big>
<tt class="nobg">&#x21d2; bool</tt>		<a class="headerlink" href="#JSONArray::contains" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns true if <em>item</em> is in the array, false otherwise.
When checking strings, case is ignored.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONArray::remove">
<tt class="descname">remove</tt><big>(</big><em>item</em>[, <em>max</em>][, <em>noDelete</em>]<big>)</big>
<tt class="nobg">&#x21d2; bool</tt>		<a class="headerlink" href="#JSONArray::remove" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Removes <em>item</em> from the array if it is present, returning true if it was, false otherwise.</p>
<p>If <em>item</em> is present multiple times, all occurences are removed (TODO: implement <em>max</em> functionality).</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONArray::clear">
<tt class="descname">clear</tt><big>(</big>[<em>noDelete</em>]<big>)</big>
<tt class="nobg">&#x21d2; JSONArray</tt>		<a class="headerlink" href="#JSONArray::clear" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Removes all items from the array.</p>


	</dd>
</dl>
	</dd>
</dl><dl class="class">
	<dt id="class_JSONHash">
		<tt class="nobg">abstract class</tt>
		<tt class="descname">JSONHash</tt>		<a class="headerlink" href="#class_JSONHash" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>A JSON hash object, such as <code>{"hello": 3.14, "foo": "bar"}</code>.</p>
<p>Keys which are valid TorqueScript identifiers can be accessed as <code>hash.keyname</code> directly.
All keys (including invalid TorqueScript identifiers) can be accessed using <code>::get</code>.</p>
<p>The number of keys is stored as <code>hash.length</code>, unless a <code>length</code> key is present.
Use <code>::getLength</code> for consistency in this case.</p>
<p>Iteration example:</p>
<pre><code>for (%i = 0; %i &lt; %hash.getLength(); %i++)
{
  %key = %hash.getKey(%i);
  echo(%key SPC "=" SPC %hash.get(%key));
}
</code></pre>



<dl class="function">
	<dt id="JSONHash::getLength">
<tt class="descname">getLength</tt><big>(</big><big>)</big>
<tt class="nobg">&#x21d2; int</tt>		<a class="headerlink" href="#JSONHash::getLength" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns the number of key-&gt;value mappings in the hash.
This will work correctly even if a <em>length</em> key is present.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::getKey">
<tt class="descname">getKey</tt><big>(</big><em>index</em><big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#JSONHash::getKey" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns the <em>index</em>th key name in the hash, "" if out of range.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::isKey">
<tt class="descname">isKey</tt><big>(</big><em>key</em><big>)</big>
<tt class="nobg">&#x21d2; bool</tt>		<a class="headerlink" href="#JSONHash::isKey" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns true if <em>key</em> is present in the hash, false otherwise.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::isValue">
<tt class="descname">isValue</tt><big>(</big><em>value</em><big>)</big>
<tt class="nobg">&#x21d2; bool</tt>		<a class="headerlink" href="#JSONHash::isValue" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns true if any of the keys in the hash are set to <em>value</em>, false otherwise.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::describe">
<tt class="descname">describe</tt><big>(</big>[<em>depth</em>]<big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#JSONHash::describe" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		


			<dl>
				<dt>See also:</dt>
<dd><a href="#describeJSON"><code>describeJSON</code></a></dd>			</dl>
	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::set">
<tt class="descname">set</tt><big>(</big><em>key</em>, <em>value</em><big>)</big>
<tt class="nobg">&#x21d2; JSONHash</tt>		<a class="headerlink" href="#JSONHash::set" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Sets the value of <em>key</em> to <em>value</em>,
and adds <em>key</em> to the hash if it is not present.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::setDefault">
<tt class="descname">setDefault</tt><big>(</big><em>key</em>, <em>value</em><big>)</big>
<tt class="nobg">&#x21d2; anything</tt>		<a class="headerlink" href="#JSONHash::setDefault" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Sets the value of <em>key</em> to <em>value</em> if the key is not present in the hash.
Returns the resulting value of <em>key</em>, even if it was previously defined.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::get">
<tt class="descname">get</tt><big>(</big><em>key</em>[, <em>default</em>]<big>)</big>
<tt class="nobg">&#x21d2; anything</tt>		<a class="headerlink" href="#JSONHash::get" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns the value assigned to <em>key</em> if it is present, <em>default</em> ("" if unspecified) otherwise.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::remove">
<tt class="descname">remove</tt><big>(</big><em>key</em>[, <em>noDelete</em>]<big>)</big>
<tt class="nobg">&#x21d2; bool</tt>		<a class="headerlink" href="#JSONHash::remove" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Removes <em>key</em> and it's assigned value from the hash if present.
Returns whether or not <em>key</em> was in the hash previously.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="JSONHash::clear">
<tt class="descname">clear</tt><big>(</big>[<em>noDelete</em>]<big>)</big>
<tt class="nobg">&#x21d2; JSONHash</tt>		<a class="headerlink" href="#JSONHash::clear" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Removes all key-&gt;value mappings from the hash.</p>


	</dd>
</dl>
	</dd>
</dl><dl class="function">
	<dt id="parseJSON">
<tt class="descname">parseJSON</tt><big>(</big><em>blob</em><big>)</big>
<tt class="nobg">&#x21d2; anything</tt>		<a class="headerlink" href="#parseJSON" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Parses <em>blob</em>, a serialized JSON type, and returns a fitting TS representation.</p>
<p>This does not leak any objects internally, however the output will be an object for certain types.
In this case, cleaning up (deleting the object) properly is up to the user.</p>
<p>Returns a string, number, JSONObject subclass or "" when an error occured.</p>
<p>Supported types and translations:</p>
<ul>
<li><code>hash</code> -&gt; <code>JSONHash()</code></li>
<li><code>array</code> -&gt; <code>JSONArray()</code></li>
<li><code>string</code> -&gt; native string</li>
<li><code>number</code> -&gt; number in native string</li>
<li><code>bool</code> -&gt; "1" (true) or "0" (false)</li>
<li><code>null</code> -&gt; ""</li>
</ul>
<p>Example:</p>
<pre><code>%blob = "...";
%json = parseJSON(%blob);

if (%json $= "") {
  error("ERROR: Failed to parse JSON.");
  return;
}


if (isJSONObject(%json)) {
  %json.delete(); // note: deletes any children
}
</code></pre>


	</dd>
</dl>
<dl class="function">
	<dt id="getJSONType">
<tt class="descname">getJSONType</tt><big>(</big><em>data</em><big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#getJSONType" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Analyzes <em>data</em> and returns a string description of it's JSON type.</p>
<p>Possible return values:</p>
<ul>
<li><code>"null"</code> (when <em>data</em> is an empty string)</li>
<li><code>"string"</code></li>
<li><code>"number"</code></li>
<li><code>"array"</code></li>
<li><code>"hash"</code></li>
</ul>
<p>Keep in mind:</p>
<ul>
<li>Strings containing valid JSON numbers are interpreted as numbers.</li>
<li>Booleans are lost in translation.</li>
</ul>
<p>Example:</p>
<pre><code>%json = parseJSON("[]");
echo(getJSONType(%json)); // array
</code></pre>


	</dd>
</dl>
<dl class="function">
	<dt id="isJSONObject">
<tt class="descname">isJSONObject</tt><big>(</big><em>data</em><big>)</big>
<tt class="nobg">&#x21d2; bool</tt>		<a class="headerlink" href="#isJSONObject" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Correctly determines if <em>data</em> is a reference to a JSON object (hash/array) and returns true or false.
Use this instead of <code>isObject(data)</code>, as this will not accidentally confuse numbers for existing objects.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="dumpJSON">
<tt class="descname">dumpJSON</tt><big>(</big><em>data</em><big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#dumpJSON" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Recursively builds a JSON string of <em>data</em> (as parsed by <code>parseJSON</code>) and returns it.</p>
<p>Keep in mind that <code>dumpJSON(parseJSON(x))</code> is not necessarily <code>x</code>.
See notes for <code>getJSONType</code> for further details.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="describeJSON">
<tt class="descname">describeJSON</tt><big>(</big><em>data</em>[, <em>depth</em>]<big>)</big>
<tt class="nobg">&#x21d2; string</tt>		<a class="headerlink" href="#describeJSON" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Returns a string representing <em>data</em>, using <code>JSONObject::describe</code> for JSON objects.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="saveJSON">
<tt class="descname">saveJSON</tt><big>(</big><em>data</em>, <em>filename</em>[, <em>fo</em>]<big>)</big>
<tt class="nobg">&#x21d2; bool</tt>		<a class="headerlink" href="#saveJSON" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Saves the given JSON object <em>data</em> into a file at <em>filename</em>.
If saving and loading a lot of files, you may pass your own FileObject through <em>fo</em> rather than recreating a lot of them.</p>
<p>Returns true on a successful write, false otherwise.</p>


	</dd>
</dl>
<dl class="function">
	<dt id="loadJSON">
<tt class="descname">loadJSON</tt><big>(</big><em>filename</em>[, <em>defaultStruct</em>][, <em>fo</em>]<big>)</big>
<tt class="nobg">&#x21d2; anything</tt>		<a class="headerlink" href="#loadJSON" title="Permalink to this definition">&para;</a>
	</dt>
	<dd>
		<p>Loads a JSON object from a given file.
If the file does not exist, <code>defaultStruct</code> is parsed and returned.</p>
<p>If saving and loading a lot of files, you may pass your own FileObject through <em>fo</em> rather than recreating a lot of them.
If using your own FileObject with no <em>defaultStruct</em>, please provide "" as <em>defaultStruct</em>.</p>


	</dd>
</dl>
	</body>
</html>